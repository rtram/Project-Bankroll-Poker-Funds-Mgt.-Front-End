{"ast":null,"code":"import _classCallCheck from \"/Users/flatironschool/Development/module_5/poker_app_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/Development/module_5/poker_app_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/Development/module_5/poker_app_frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/Development/module_5/poker_app_frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/Development/module_5/poker_app_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/Development/module_5/poker_app_frontend/src/react/inbox/Request.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Container, Divider, Header, Button } from 'semantic-ui-react';\nimport { completingTransaction } from '../../redux/actions/users';\n\nvar Request =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Request, _Component);\n\n  function Request() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Request);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Request)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleComplete = function () {\n      var currentUserBalanceObject = {\n        id: _this.props.request.requestee.id,\n        balance: _this.calculateTotal()\n      };\n      var recipientBalance = parseFloat(_this.props.selectedProfile.balance) + parseFloat(_this.state.amount);\n      var recipientBalanceObject = {\n        id: _this.props.request.requestor.id,\n        balance: recipientBalance\n      };\n\n      _this.props.updatingUserBalance(currentUserBalanceObject);\n\n      _this.props.updatingRecipientBalance(recipientBalanceObject);\n\n      var transactionObject = {\n        sender_id: _this.props.request.requestee.id,\n        recipient_id: _this.props.request.requestor.id,\n        message: _this.props.request.message,\n        amount: _this.props.request.amount,\n        date: _this.formatDate()\n      };\n\n      _this.props.completingTransaction(transactionObject);\n    };\n\n    _this.formatDate = function () {\n      var d = new Date(),\n          month = '' + (d.getMonth() + 1),\n          day = '' + d.getDate(),\n          year = d.getFullYear();\n      if (month.length < 2) month = '0' + month;\n      if (day.length < 2) day = '0' + day;\n      return [year, month, day].join('-');\n    };\n\n    _this.calculateTotal = function () {\n      var balance = _this.props.balance;\n\n      if (isNaN(balance)) {\n        balance = 0;\n      }\n\n      var payment = _this.state.amount;\n\n      if (isNaN(payment) || payment === '') {\n        payment = 0;\n      }\n\n      var newTotal = parseFloat(balance) - parseFloat(payment);\n      return newTotal;\n    };\n\n    return _this;\n  }\n\n  _createClass(Request, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, this.props.request.requestor.first_name, \" \", this.props.request.requestor.last_name), React.createElement(Header, {\n        as: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.props.request.date), React.createElement(Header, {\n        as: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, this.props.request.amount), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.props.request.message), React.createElement(Button, {\n        onClick: this.handleComplete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Complete\"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Request;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    currentUser: state.currentUser,\n    balance: state.balance\n  };\n};\n\nexport default connect(mapStateToProps, {\n  completingTransaction: completingTransaction\n})(Request);","map":{"version":3,"sources":["/Users/flatironschool/Development/module_5/poker_app_frontend/src/react/inbox/Request.js"],"names":["React","Component","connect","Container","Divider","Header","Button","completingTransaction","Request","handleComplete","currentUserBalanceObject","id","props","request","requestee","balance","calculateTotal","recipientBalance","parseFloat","selectedProfile","state","amount","recipientBalanceObject","requestor","updatingUserBalance","updatingRecipientBalance","transactionObject","sender_id","recipient_id","message","date","formatDate","d","Date","month","getMonth","day","getDate","year","getFullYear","length","join","isNaN","payment","newTotal","first_name","last_name","mapStateToProps","currentUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Header, Button } from 'semantic-ui-react'\n\nimport { completingTransaction } from '../../redux/actions/users'\n\nclass Request extends Component {\n\n  handleComplete = () => {\n    let currentUserBalanceObject = {\n      id: this.props.request.requestee.id,\n      balance: this.calculateTotal()\n    }\n\n    let recipientBalance = parseFloat(this.props.selectedProfile.balance) + parseFloat(this.state.amount)\n\n    let recipientBalanceObject = {\n      id: this.props.request.requestor.id,\n      balance: recipientBalance\n    }\n\n    this.props.updatingUserBalance(currentUserBalanceObject)\n    this.props.updatingRecipientBalance(recipientBalanceObject)\n\n    let transactionObject = {\n      sender_id: this.props.request.requestee.id,\n      recipient_id: this.props.request.requestor.id,\n      message: this.props.request.message,\n      amount: this.props.request.amount,\n      date: this.formatDate()\n    }\n    this.props.completingTransaction(transactionObject)\n\n  }\n\n  // RETURNS THE PRESENT DAY IN PROPER FORMAT\n  formatDate = () => {\n    var d = new Date(),\n        month = '' + (d.getMonth() + 1),\n        day = '' + d.getDate(),\n        year = d.getFullYear();\n\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n\n    return [year, month, day].join('-');\n  }\n\n  // RETURNS UPDATED BALANCE AS THE DIFF OF OLD BALANCE - PAYMENT\n  calculateTotal = () => {\n    let balance = this.props.balance\n    if (isNaN(balance)) {\n      balance = 0\n    }\n    let payment = this.state.amount\n    if (isNaN(payment) || payment === '') {\n      payment = 0\n    }\n    let newTotal = parseFloat(balance) - parseFloat(payment)\n    return newTotal\n  }\n\n\n  render() {\n    return(\n      <Container>\n        <Header as='h3'>{this.props.request.requestor.first_name} {this.props.request.requestor.last_name}</Header>\n        <Header as='h4'>{this.props.request.date}</Header>\n        <Header as='h4'>{this.props.request.amount}</Header>\n        <p>{this.props.request.message}</p>\n        <Button onClick={this.handleComplete}>Complete</Button>\n        <Divider />\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser,\n    balance: state.balance,\n  }\n}\n\nexport default connect(mapStateToProps, { completingTransaction })(Request)\n"]},"metadata":{},"sourceType":"module"}